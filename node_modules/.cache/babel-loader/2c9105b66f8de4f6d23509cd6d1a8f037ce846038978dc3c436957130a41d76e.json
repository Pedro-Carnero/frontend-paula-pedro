{"ast":null,"code":"var _jsxFileName = \"/home/pedro/Desktop/warsawhack/src/VideoEditor.tsx\",\n  _s = $RefreshSig$();\n// src/VideoEditor.tsx\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction createId() {\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\n}\nconst PIXELS_PER_SECOND = 80;\nconst safePlay = media => {\n  if (!media) return;\n  const p = media.play();\n  if (p && typeof p.then === \"function\") {\n    p.catch(err => {\n      // Evita que reviente cuando el play es interrumpido por un cambio de src\n      console.warn(\"Playback interrupted:\", err);\n    });\n  }\n};\nconst VideoEditor = () => {\n  _s();\n  const [videoAssets, setVideoAssets] = useState([]);\n  const [audioAssets, setAudioAssets] = useState([]);\n  const [videoSegments, setVideoSegments] = useState([]);\n  const [audioSegments, setAudioSegments] = useState([]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [selectedVideoSegmentId, setSelectedVideoSegmentId] = useState(null);\n  const [selectedAudioSegmentId, setSelectedAudioSegmentId] = useState(null);\n  const videoRef = useRef(null);\n  const audioRef = useRef(null);\n  const [isAudioPlaying, setIsAudioPlaying] = useState(false);\n  const selectedVideoSegment = videoSegments.find(s => s.id === selectedVideoSegmentId) || null;\n  const selectedAudioSegment = audioSegments.find(s => s.id === selectedAudioSegmentId) || null;\n  const selectedVideoAsset = selectedVideoSegment ? videoAssets.find(a => a.id === selectedVideoSegment.assetId) || null : null;\n  const selectedAudioAsset = selectedAudioSegment ? audioAssets.find(a => a.id === selectedAudioSegment.assetId) || null : null;\n\n  // UPLOAD HANDLERS\n  const handleVideoUpload = e => {\n    const files = e.target.files;\n    if (!files) return;\n    const newAssets = [];\n    Array.from(files).forEach(file => {\n      const url = URL.createObjectURL(file);\n      newAssets.push({\n        id: createId(),\n        name: file.name,\n        url\n      });\n    });\n    setVideoAssets(prev => [...prev, ...newAssets]);\n  };\n  const handleAudioUpload = e => {\n    const files = e.target.files;\n    if (!files) return;\n    const newAssets = [];\n    Array.from(files).forEach(file => {\n      const url = URL.createObjectURL(file);\n      newAssets.push({\n        id: createId(),\n        name: file.name,\n        url\n      });\n    });\n    setAudioAssets(prev => [...prev, ...newAssets]);\n  };\n\n  // Timeline segment adders\n  const addVideoToTimeline = asset => {\n    var _asset$duration;\n    const defaultDuration = (_asset$duration = asset.duration) !== null && _asset$duration !== void 0 ? _asset$duration : 10;\n    const segment = {\n      id: createId(),\n      assetId: asset.id,\n      sourceStart: 0,\n      duration: defaultDuration,\n      timelineStart: 0\n    };\n    setVideoSegments(prev => [...prev, segment]);\n    setSelectedVideoSegmentId(segment.id);\n  };\n  const addAudioToTimeline = asset => {\n    var _asset$duration2;\n    const defaultDuration = (_asset$duration2 = asset.duration) !== null && _asset$duration2 !== void 0 ? _asset$duration2 : 10;\n    const segment = {\n      id: createId(),\n      assetId: asset.id,\n      sourceStart: 0,\n      duration: defaultDuration,\n      timelineStart: 0\n    };\n    setAudioSegments(prev => [...prev, segment]);\n    setSelectedAudioSegmentId(segment.id);\n  };\n\n  // Capture metadata durations\n  const handleVideoLoadedMetadata = (assetId, duration) => {\n    setVideoAssets(prev => prev.map(a => a.id === assetId ? {\n      ...a,\n      duration\n    } : a));\n  };\n  const handleAudioLoadedMetadata = (assetId, duration) => {\n    setAudioAssets(prev => prev.map(a => a.id === assetId ? {\n      ...a,\n      duration\n    } : a));\n  };\n\n  // Returns the next segment in time after the current one\n  const getNextVideoSegment = () => {\n    var _sorted;\n    if (!selectedVideoSegment) return null;\n\n    // Order segments by timelineStart\n    const sorted = [...videoSegments].sort((a, b) => a.timelineStart - b.timelineStart);\n\n    // Find next segment after this one\n    const idx = sorted.findIndex(s => s.id === selectedVideoSegment.id);\n    return (_sorted = sorted[idx + 1]) !== null && _sorted !== void 0 ? _sorted : null;\n  };\n\n  // Play/pause toggle\n  const togglePlayback = () => {\n    const video = videoRef.current;\n    if (!video) return;\n    if (!isPlaying) {\n      // Elegimos segmento de inicio\n      let startSegment = selectedVideoSegment;\n\n      // Si no hay seleccionado, cogemos el primero en la timeline\n      if (!startSegment && videoSegments.length > 0) {\n        const sorted = [...videoSegments].sort((a, b) => a.timelineStart - b.timelineStart);\n        startSegment = sorted[0];\n        setSelectedVideoSegmentId(startSegment.id);\n      }\n      if (!startSegment) return;\n\n      // Marcamos que estamos reproduciendo.\n      setIsPlaying(true);\n      // El efecto de abajo se encargará de posicionar y hacer play\n    } else {\n      setIsPlaying(false);\n      video.pause();\n    }\n  };\n  const toggleAudioPlayback = () => {\n    const audio = audioRef.current;\n    if (!audio) return;\n    if (!isAudioPlaying) {\n      // Elegimos segmento de inicio\n      let startSegment = selectedAudioSegment;\n\n      // Si no hay seleccionado, cogemos el primero en la timeline\n      if (!startSegment && audioSegments.length > 0) {\n        const sorted = [...audioSegments].sort((a, b) => a.timelineStart - b.timelineStart);\n        startSegment = sorted[0];\n        setSelectedAudioSegmentId(startSegment.id);\n      }\n      if (!startSegment) return;\n      setIsAudioPlaying(true);\n      // El efecto de abajo se encargará de posicionar y hacer play\n    } else {\n      setIsAudioPlaying(false);\n      audio.pause();\n    }\n  };\n\n  // Cuando cambia el segmento seleccionado y estamos en modo \"isPlaying\",\n  // recolocamos el vídeo y le damos a play (sirve para clip 1 → clip 2, etc.)\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !selectedVideoSegment || !isPlaying) return;\n    video.currentTime = selectedVideoSegment.sourceStart;\n    safePlay(video);\n  }, [selectedVideoSegment, selectedVideoAsset, isPlaying]);\n\n  // Cuando cambia el segmento de audio seleccionado y estamos en modo \"isAudioPlaying\",\n  // recolocamos el audio y le damos a play (sirve para clip 1 → clip 2, etc.)\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio || !selectedAudioSegment || !isAudioPlaying) return;\n    audio.currentTime = selectedAudioSegment.sourceStart;\n    safePlay(audio);\n  }, [selectedAudioSegment, selectedAudioAsset, isAudioPlaying]);\n\n  // Stop playback when segment duration ends\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !selectedVideoSegment) return;\n    const stopAt = selectedVideoSegment.sourceStart + selectedVideoSegment.duration;\n    const onTimeUpdate = () => {\n      if (!isPlaying) return;\n      if (video.currentTime >= stopAt) {\n        const next = getNextVideoSegment();\n        if (next) {\n          // Solo cambiamos el segmento; el efecto de arriba se encarga de recolocar y dar play.\n          setSelectedVideoSegmentId(next.id);\n        } else {\n          setIsPlaying(false);\n          video.pause();\n        }\n      }\n    };\n    video.addEventListener(\"timeupdate\", onTimeUpdate);\n    return () => video.removeEventListener(\"timeupdate\", onTimeUpdate);\n  }, [selectedVideoSegment, isPlaying, videoSegments]);\n\n  // Auto-play next audio segment\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio || !selectedAudioSegment) return;\n    const stopAt = selectedAudioSegment.sourceStart + selectedAudioSegment.duration;\n    const onTimeUpdate = () => {\n      if (!isAudioPlaying) return;\n      if (audio.currentTime >= stopAt) {\n        const sorted = [...audioSegments].sort((a, b) => a.timelineStart - b.timelineStart);\n        const idx = sorted.findIndex(s => s.id === selectedAudioSegment.id);\n        const next = sorted[idx + 1];\n        if (next) {\n          // Solo cambiamos de segmento: el efecto de arriba se encarga de recolocar y hacer play\n          setSelectedAudioSegmentId(next.id);\n        } else {\n          setIsAudioPlaying(false);\n          audio.pause();\n        }\n      }\n    };\n    audio.addEventListener(\"timeupdate\", onTimeUpdate);\n    return () => audio.removeEventListener(\"timeupdate\", onTimeUpdate);\n  }, [selectedAudioSegment, audioSegments, isAudioPlaying]);\n\n  // Segment editing helpers\n  const updateVideoSegment = (id, patch) => {\n    setVideoSegments(prev => prev.map(s => s.id === id ? {\n      ...s,\n      ...patch\n    } : s));\n  };\n  const updateAudioSegment = (id, patch) => {\n    setAudioSegments(prev => prev.map(s => s.id === id ? {\n      ...s,\n      ...patch\n    } : s));\n  };\n  const deleteVideoSegment = id => {\n    setVideoSegments(prev => prev.filter(s => s.id !== id));\n    if (selectedVideoSegmentId === id) setSelectedVideoSegmentId(null);\n  };\n  const deleteAudioSegment = id => {\n    setAudioSegments(prev => prev.filter(s => s.id !== id));\n    if (selectedAudioSegmentId === id) setSelectedAudioSegmentId(null);\n  };\n\n  // Drag state\n  const dragState = useRef(null);\n  const resizeState = useRef(null);\n\n  // Start drag\n  const onSegmentMouseDown = (e, segmentId, initialTimelineStart) => {\n    dragState.current = {\n      id: segmentId,\n      initialX: e.clientX,\n      initialOffset: initialTimelineStart\n    };\n  };\n\n  // Handle drag movement globally\n  useEffect(() => {\n    const onMouseMove = e => {\n      if (dragState.current) {\n        const deltaPx = e.clientX - dragState.current.initialX;\n        const deltaSec = deltaPx / PIXELS_PER_SECOND;\n        const updated = dragState.current.initialOffset + deltaSec;\n        setVideoSegments(prev => prev.map(seg => seg.id === dragState.current.id ? {\n          ...seg,\n          timelineStart: Math.max(0, updated)\n        } : seg));\n        setAudioSegments(prev => prev.map(seg => seg.id === dragState.current.id ? {\n          ...seg,\n          timelineStart: Math.max(0, updated)\n        } : seg));\n      }\n      if (resizeState.current) {\n        onResize(e);\n      }\n    };\n\n    // Resize logic\n    const onResize = e => {\n      if (!resizeState.current) return;\n      const deltaPx = e.clientX - resizeState.current.initialX;\n      const deltaSecs = deltaPx / PIXELS_PER_SECOND;\n      setVideoSegments(prev => prev.map(seg => {\n        var _asset$duration3;\n        if (seg.id !== resizeState.current.id) return seg;\n        let newStart = resizeState.current.initialSourceStart;\n        let newDuration = resizeState.current.initialDuration;\n        if (resizeState.current.edge === \"left\") {\n          newStart = Math.max(0, resizeState.current.initialSourceStart + deltaSecs);\n          newDuration = resizeState.current.initialDuration - deltaSecs;\n        } else {\n          newDuration = resizeState.current.initialDuration + deltaSecs;\n        }\n\n        // Clamp duration\n        const asset = videoAssets.find(a => a.id === seg.assetId);\n        const max = (_asset$duration3 = asset === null || asset === void 0 ? void 0 : asset.duration) !== null && _asset$duration3 !== void 0 ? _asset$duration3 : Infinity;\n        newDuration = Math.max(0.1, Math.min(newDuration, max - newStart));\n        return {\n          ...seg,\n          sourceStart: newStart,\n          duration: newDuration\n        };\n      }));\n      setAudioSegments(prev => prev.map(seg => {\n        var _asset$duration4;\n        if (seg.id !== resizeState.current.id) return seg;\n        let newStart = resizeState.current.initialSourceStart;\n        let newDuration = resizeState.current.initialDuration;\n        if (resizeState.current.edge === \"left\") {\n          newStart = Math.max(0, resizeState.current.initialSourceStart + deltaSecs);\n          newDuration = resizeState.current.initialDuration - deltaSecs;\n        } else {\n          newDuration = resizeState.current.initialDuration + deltaSecs;\n        }\n        const asset = audioAssets.find(a => a.id === seg.assetId);\n        const max = (_asset$duration4 = asset === null || asset === void 0 ? void 0 : asset.duration) !== null && _asset$duration4 !== void 0 ? _asset$duration4 : Infinity;\n        newDuration = Math.max(0.1, Math.min(newDuration, max - newStart));\n        return {\n          ...seg,\n          sourceStart: newStart,\n          duration: newDuration\n        };\n      }));\n    };\n    const onMouseUp = () => {\n      dragState.current = null;\n      resizeState.current = null;\n    };\n    window.addEventListener(\"mousemove\", onMouseMove);\n    window.addEventListener(\"mouseup\", onMouseUp);\n    return () => {\n      window.removeEventListener(\"mousemove\", onMouseMove);\n      window.removeEventListener(\"mouseup\", onMouseUp);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"100vh\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      style: {\n        width: 260,\n        borderRight: \"1px solid #ddd\",\n        padding: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Assets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"V\\xEDdeos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"video/*\",\n        multiple: true,\n        onChange: handleVideoUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          maxHeight: 150,\n          overflowY: \"auto\",\n          padding: 0\n        },\n        children: videoAssets.map(asset => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [asset.name, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addVideoToTimeline(asset),\n            children: \"+ Timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this), !asset.duration && /*#__PURE__*/_jsxDEV(\"video\", {\n            src: asset.url,\n            style: {\n              display: \"none\"\n            },\n            onLoadedMetadata: e => handleVideoLoadedMetadata(asset.id, e.currentTarget.duration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 17\n          }, this)]\n        }, asset.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Audios\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"audio/*\",\n        multiple: true,\n        onChange: handleAudioUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          maxHeight: 150,\n          overflowY: \"auto\",\n          padding: 0\n        },\n        children: audioAssets.map(asset => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [asset.name, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addAudioToTimeline(asset),\n            children: \"+ Timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this), !asset.duration && /*#__PURE__*/_jsxDEV(\"audio\", {\n            src: asset.url,\n            style: {\n              display: \"none\"\n            },\n            onLoadedMetadata: e => handleAudioLoadedMetadata(asset.id, e.currentTarget.duration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 17\n          }, this)]\n        }, asset.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      style: {\n        flex: 1,\n        display: \"flex\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        style: {\n          padding: 10,\n          borderBottom: \"1px solid #ddd\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Proyecto sin nombre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        style: {\n          display: \"flex\",\n          padding: 12,\n          gap: 16,\n          borderBottom: \"1px solid #eee\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: \"#000\",\n              height: 300,\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\"\n            },\n            children: selectedVideoAsset ? /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              src: selectedVideoAsset.url,\n              style: {\n                maxWidth: \"100%\",\n                maxHeight: \"100%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"#aaa\"\n              },\n              children: \"Selecciona un segmento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: togglePlayback,\n            disabled: videoSegments.length === 0,\n            children: isPlaying ? \"⏸ Pause\" : \"▶ Play\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Audio seleccionado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 13\n          }, this), selectedAudioAsset ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: selectedAudioAsset.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n              ref: audioRef,\n              src: selectedAudioAsset.url,\n              controls: true,\n              style: {\n                width: \"100%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this), selectedAudioAsset ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: selectedAudioAsset.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n                ref: audioRef,\n                src: selectedAudioAsset.url,\n                controls: true,\n                style: {\n                  width: \"100%\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 8\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: toggleAudioPlayback,\n                  disabled: audioSegments.length === 0,\n                  children: isAudioPlaying ? \"⏸ Pause audio\" : \"▶ Play audio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"#aaa\"\n              },\n              children: \"Selecciona audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"#aaa\"\n            },\n            children: \"Selecciona audio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        style: {\n          flex: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n          padding: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"V\\xEDdeo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: \"1px solid #ccc\",\n            minHeight: 60,\n            display: \"flex\",\n            gap: 8,\n            overflowX: \"auto\"\n          },\n          children: videoSegments.map(seg => {\n            var _asset$name;\n            const asset = videoAssets.find(a => a.id === seg.assetId);\n            const isSelected = seg.id === selectedVideoSegmentId;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              onMouseDown: e => onSegmentMouseDown(e, seg.id, seg.timelineStart),\n              onClick: () => setSelectedVideoSegmentId(seg.id),\n              style: {\n                position: \"relative\",\n                marginLeft: `${seg.timelineStart * PIXELS_PER_SECOND}px`,\n                width: `${seg.duration * PIXELS_PER_SECOND}px`,\n                padding: \"4px\",\n                borderRadius: \"4px\",\n                border: isSelected ? \"2px solid #2563eb\" : \"1px solid #ccc\",\n                background: isSelected ? \"#eff6ff\" : \"#f9fafb\",\n                cursor: \"grab\",\n                fontSize: \"0.8rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onMouseDown: e => {\n                  e.stopPropagation();\n                  resizeState.current = {\n                    id: seg.id,\n                    edge: \"left\",\n                    initialX: e.clientX,\n                    initialSourceStart: seg.sourceStart,\n                    initialDuration: seg.duration\n                  };\n                },\n                style: {\n                  position: \"absolute\",\n                  left: 0,\n                  top: 0,\n                  bottom: 0,\n                  width: \"6px\",\n                  background: \"rgba(0,0,0,0.2)\",\n                  cursor: \"ew-resize\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                onMouseDown: e => {\n                  e.stopPropagation();\n                  resizeState.current = {\n                    id: seg.id,\n                    edge: \"right\",\n                    initialX: e.clientX,\n                    initialSourceStart: seg.sourceStart,\n                    initialDuration: seg.duration\n                  };\n                },\n                style: {\n                  position: \"absolute\",\n                  right: 0,\n                  top: 0,\n                  bottom: 0,\n                  width: \"6px\",\n                  background: \"rgba(0,0,0,0.2)\",\n                  cursor: \"ew-resize\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: (_asset$name = asset === null || asset === void 0 ? void 0 : asset.name) !== null && _asset$name !== void 0 ? _asset$name : \"Clip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 19\n              }, this)]\n            }, seg.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), selectedVideoSegment && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: \"1px solid #ddd\",\n            padding: 8,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Editar segmento v\\xEDdeo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Source start:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: selectedVideoSegment.sourceStart,\n              onChange: e => updateVideoSegment(selectedVideoSegment.id, {\n                sourceStart: Number(e.target.value)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Duration:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: selectedVideoSegment.duration,\n              onChange: e => updateVideoSegment(selectedVideoSegment.id, {\n                duration: Number(e.target.value)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Timeline start:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: selectedVideoSegment.timelineStart,\n              onChange: e => updateVideoSegment(selectedVideoSegment.id, {\n                timelineStart: Number(e.target.value)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Audio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: \"1px solid #ccc\",\n            minHeight: 60,\n            display: \"flex\",\n            gap: 8,\n            overflowX: \"auto\"\n          },\n          children: audioSegments.map(seg => {\n            var _asset$name2;\n            const asset = audioAssets.find(a => a.id === seg.assetId);\n            const isSelected = seg.id === selectedAudioSegmentId;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              onMouseDown: e => onSegmentMouseDown(e, seg.id, seg.timelineStart),\n              onClick: () => setSelectedAudioSegmentId(seg.id),\n              style: {\n                position: \"relative\",\n                marginLeft: `${seg.timelineStart * PIXELS_PER_SECOND}px`,\n                width: `${seg.duration * PIXELS_PER_SECOND}px`,\n                padding: \"4px\",\n                borderRadius: \"4px\",\n                border: isSelected ? \"2px solid #2563eb\" : \"1px solid #ccc\",\n                background: isSelected ? \"#eff6ff\" : \"#f9fafb\",\n                cursor: \"grab\",\n                fontSize: \"0.8rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onMouseDown: e => {\n                  e.stopPropagation();\n                  resizeState.current = {\n                    id: seg.id,\n                    edge: \"left\",\n                    initialX: e.clientX,\n                    initialSourceStart: seg.sourceStart,\n                    initialDuration: seg.duration\n                  };\n                },\n                style: {\n                  position: \"absolute\",\n                  left: 0,\n                  top: 0,\n                  bottom: 0,\n                  width: \"6px\",\n                  background: \"rgba(0,0,0,0.2)\",\n                  cursor: \"ew-resize\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                onMouseDown: e => {\n                  e.stopPropagation();\n                  resizeState.current = {\n                    id: seg.id,\n                    edge: \"right\",\n                    initialX: e.clientX,\n                    initialSourceStart: seg.sourceStart,\n                    initialDuration: seg.duration\n                  };\n                },\n                style: {\n                  position: \"absolute\",\n                  right: 0,\n                  top: 0,\n                  bottom: 0,\n                  width: \"6px\",\n                  background: \"rgba(0,0,0,0.2)\",\n                  cursor: \"ew-resize\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: (_asset$name2 = asset === null || asset === void 0 ? void 0 : asset.name) !== null && _asset$name2 !== void 0 ? _asset$name2 : \"Clip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 19\n              }, this)]\n            }, seg.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 11\n        }, this), selectedAudioSegment && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: \"1px solid #ddd\",\n            padding: 8,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Editar segmento audio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Source start:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: selectedAudioSegment.sourceStart,\n              onChange: e => updateAudioSegment(selectedAudioSegment.id, {\n                sourceStart: Number(e.target.value)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Duration:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: selectedAudioSegment.duration,\n              onChange: e => updateAudioSegment(selectedAudioSegment.id, {\n                duration: Number(e.target.value)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Timeline start:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: selectedAudioSegment.timelineStart,\n              onChange: e => updateAudioSegment(selectedAudioSegment.id, {\n                timelineStart: Number(e.target.value)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoEditor, \"/oml9A7Pt62jSdWBoXSOdLAoFqU=\");\n_c = VideoEditor;\nexport default VideoEditor;\nvar _c;\n$RefreshReg$(_c, \"VideoEditor\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","createId","Math","random","toString","slice","Date","now","PIXELS_PER_SECOND","safePlay","media","p","play","then","catch","err","console","warn","VideoEditor","_s","videoAssets","setVideoAssets","audioAssets","setAudioAssets","videoSegments","setVideoSegments","audioSegments","setAudioSegments","isPlaying","setIsPlaying","selectedVideoSegmentId","setSelectedVideoSegmentId","selectedAudioSegmentId","setSelectedAudioSegmentId","videoRef","audioRef","isAudioPlaying","setIsAudioPlaying","selectedVideoSegment","find","s","id","selectedAudioSegment","selectedVideoAsset","a","assetId","selectedAudioAsset","handleVideoUpload","e","files","target","newAssets","Array","from","forEach","file","url","URL","createObjectURL","push","name","prev","handleAudioUpload","addVideoToTimeline","asset","_asset$duration","defaultDuration","duration","segment","sourceStart","timelineStart","addAudioToTimeline","_asset$duration2","handleVideoLoadedMetadata","map","handleAudioLoadedMetadata","getNextVideoSegment","_sorted","sorted","sort","b","idx","findIndex","togglePlayback","video","current","startSegment","length","pause","toggleAudioPlayback","audio","currentTime","stopAt","onTimeUpdate","next","addEventListener","removeEventListener","updateVideoSegment","patch","updateAudioSegment","deleteVideoSegment","filter","deleteAudioSegment","dragState","resizeState","onSegmentMouseDown","segmentId","initialTimelineStart","initialX","clientX","initialOffset","onMouseMove","deltaPx","deltaSec","updated","seg","max","onResize","deltaSecs","_asset$duration3","newStart","initialSourceStart","newDuration","initialDuration","edge","Infinity","min","_asset$duration4","onMouseUp","window","style","display","height","children","width","borderRight","padding","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","multiple","onChange","maxHeight","overflowY","onClick","src","onLoadedMetadata","currentTarget","flex","flexDirection","borderBottom","gap","background","alignItems","justifyContent","ref","maxWidth","color","disabled","controls","marginTop","border","minHeight","overflowX","_asset$name","isSelected","onMouseDown","position","marginLeft","borderRadius","cursor","fontSize","stopPropagation","left","top","bottom","right","step","value","Number","_asset$name2","_c","$RefreshReg$"],"sources":["/home/pedro/Desktop/warsawhack/src/VideoEditor.tsx"],"sourcesContent":["// src/VideoEditor.tsx\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n\r\ntype Id = string;\r\n\r\ntype VideoAsset = {\r\n  id: Id;\r\n  name: string;\r\n  url: string;\r\n  duration?: number;\r\n};\r\n\r\ntype AudioAsset = {\r\n  id: Id;\r\n  name: string;\r\n  url: string;\r\n  duration?: number;\r\n};\r\n\r\ntype VideoSegment = {\r\n  id: Id;\r\n  assetId: Id;\r\n  sourceStart: number;\r\n  duration: number;\r\n  timelineStart: number;\r\n};\r\n\r\ntype AudioSegment = {\r\n  id: Id;\r\n  assetId: Id;\r\n  sourceStart: number;\r\n  duration: number;\r\n  timelineStart: number;\r\n};\r\n\r\nfunction createId(): Id {\r\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\r\n}\r\nconst PIXELS_PER_SECOND = 80;\r\n\r\nconst safePlay = (media: HTMLMediaElement | null) => {\r\n  if (!media) return;\r\n  const p = media.play();\r\n  if (p && typeof p.then === \"function\") {\r\n    p.catch((err) => {\r\n      // Evita que reviente cuando el play es interrumpido por un cambio de src\r\n      console.warn(\"Playback interrupted:\", err);\r\n    });\r\n  }\r\n};\r\n\r\n\r\n\r\nconst VideoEditor: React.FC = () => {\r\n  const [videoAssets, setVideoAssets] = useState<VideoAsset[]>([]);\r\n  const [audioAssets, setAudioAssets] = useState<AudioAsset[]>([]);\r\n\r\n  const [videoSegments, setVideoSegments] = useState<VideoSegment[]>([]);\r\n  const [audioSegments, setAudioSegments] = useState<AudioSegment[]>([]);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n\r\n  const [selectedVideoSegmentId, setSelectedVideoSegmentId] = useState<Id | null>(null);\r\n  const [selectedAudioSegmentId, setSelectedAudioSegmentId] = useState<Id | null>(null);\r\n\r\n  const videoRef = useRef<HTMLVideoElement | null>(null);\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  const [isAudioPlaying, setIsAudioPlaying] = useState(false);\r\n\r\n\r\n  const selectedVideoSegment = videoSegments.find(s => s.id === selectedVideoSegmentId) || null;\r\n  const selectedAudioSegment = audioSegments.find(s => s.id === selectedAudioSegmentId) || null;\r\n  \r\n\r\n  const selectedVideoAsset =\r\n    selectedVideoSegment ? videoAssets.find(a => a.id === selectedVideoSegment.assetId) || null : null;\r\n  const selectedAudioAsset =\r\n    selectedAudioSegment ? audioAssets.find(a => a.id === selectedAudioSegment.assetId) || null : null;\r\n\r\n  // UPLOAD HANDLERS\r\n  const handleVideoUpload: React.ChangeEventHandler<HTMLInputElement> = (e) => {\r\n    const files = e.target.files;\r\n    if (!files) return;\r\n\r\n    const newAssets: VideoAsset[] = [];\r\n    Array.from(files).forEach(file => {\r\n      const url = URL.createObjectURL(file);\r\n      newAssets.push({ id: createId(), name: file.name, url });\r\n    });\r\n\r\n    setVideoAssets(prev => [...prev, ...newAssets]);\r\n  };\r\n\r\n  const handleAudioUpload: React.ChangeEventHandler<HTMLInputElement> = (e) => {\r\n    const files = e.target.files;\r\n    if (!files) return;\r\n\r\n    const newAssets: AudioAsset[] = [];\r\n    Array.from(files).forEach(file => {\r\n      const url = URL.createObjectURL(file);\r\n      newAssets.push({ id: createId(), name: file.name, url });\r\n    });\r\n\r\n    setAudioAssets(prev => [...prev, ...newAssets]);\r\n  };\r\n\r\n  // Timeline segment adders\r\n  const addVideoToTimeline = (asset: VideoAsset) => {\r\n    const defaultDuration = asset.duration ?? 10;\r\n    const segment: VideoSegment = {\r\n      id: createId(),\r\n      assetId: asset.id,\r\n      sourceStart: 0,\r\n      duration: defaultDuration,\r\n      timelineStart: 0\r\n    };\r\n    setVideoSegments(prev => [...prev, segment]);\r\n    setSelectedVideoSegmentId(segment.id);\r\n  };\r\n\r\n  const addAudioToTimeline = (asset: AudioAsset) => {\r\n    const defaultDuration = asset.duration ?? 10;\r\n    const segment: AudioSegment = {\r\n      id: createId(),\r\n      assetId: asset.id,\r\n      sourceStart: 0,\r\n      duration: defaultDuration,\r\n      timelineStart: 0\r\n    };\r\n    setAudioSegments(prev => [...prev, segment]);\r\n    setSelectedAudioSegmentId(segment.id);\r\n  };\r\n\r\n  // Capture metadata durations\r\n  const handleVideoLoadedMetadata = (assetId: Id, duration: number) => {\r\n    setVideoAssets(prev => prev.map(a => (a.id === assetId ? { ...a, duration } : a)));\r\n  };\r\n\r\n  const handleAudioLoadedMetadata = (assetId: Id, duration: number) => {\r\n    setAudioAssets(prev => prev.map(a => (a.id === assetId ? { ...a, duration } : a)));\r\n  };\r\n\r\n  // Returns the next segment in time after the current one\r\n  const getNextVideoSegment = () => {\r\n    if (!selectedVideoSegment) return null;\r\n\r\n    // Order segments by timelineStart\r\n    const sorted = [...videoSegments].sort((a, b) => a.timelineStart - b.timelineStart);\r\n\r\n    // Find next segment after this one\r\n    const idx = sorted.findIndex(s => s.id === selectedVideoSegment.id);\r\n    return sorted[idx + 1] ?? null;\r\n  };\r\n\r\n  // Play/pause toggle\r\n  const togglePlayback = () => {\r\n  const video = videoRef.current;\r\n  if (!video) return;\r\n\r\n  if (!isPlaying) {\r\n    // Elegimos segmento de inicio\r\n    let startSegment = selectedVideoSegment;\r\n\r\n    // Si no hay seleccionado, cogemos el primero en la timeline\r\n    if (!startSegment && videoSegments.length > 0) {\r\n      const sorted = [...videoSegments].sort((a, b) => a.timelineStart - b.timelineStart);\r\n      startSegment = sorted[0];\r\n      setSelectedVideoSegmentId(startSegment.id);\r\n    }\r\n\r\n    if (!startSegment) return;\r\n\r\n    // Marcamos que estamos reproduciendo.\r\n    setIsPlaying(true);\r\n    // El efecto de abajo se encargará de posicionar y hacer play\r\n  } else {\r\n    setIsPlaying(false);\r\n    video.pause();\r\n  }\r\n};\r\n\r\nconst toggleAudioPlayback = () => {\r\n  const audio = audioRef.current;\r\n  if (!audio) return;\r\n\r\n  if (!isAudioPlaying) {\r\n    // Elegimos segmento de inicio\r\n    let startSegment = selectedAudioSegment;\r\n\r\n    // Si no hay seleccionado, cogemos el primero en la timeline\r\n    if (!startSegment && audioSegments.length > 0) {\r\n      const sorted = [...audioSegments].sort((a, b) => a.timelineStart - b.timelineStart);\r\n      startSegment = sorted[0];\r\n      setSelectedAudioSegmentId(startSegment.id);\r\n    }\r\n\r\n    if (!startSegment) return;\r\n\r\n    setIsAudioPlaying(true);\r\n    // El efecto de abajo se encargará de posicionar y hacer play\r\n  } else {\r\n    setIsAudioPlaying(false);\r\n    audio.pause();\r\n  }\r\n};\r\n\r\n\r\n// Cuando cambia el segmento seleccionado y estamos en modo \"isPlaying\",\r\n// recolocamos el vídeo y le damos a play (sirve para clip 1 → clip 2, etc.)\r\nuseEffect(() => {\r\n  const video = videoRef.current;\r\n  if (!video || !selectedVideoSegment || !isPlaying) return;\r\n\r\n  video.currentTime = selectedVideoSegment.sourceStart;\r\n  safePlay(video);\r\n}, [selectedVideoSegment, selectedVideoAsset, isPlaying]);\r\n\r\n// Cuando cambia el segmento de audio seleccionado y estamos en modo \"isAudioPlaying\",\r\n// recolocamos el audio y le damos a play (sirve para clip 1 → clip 2, etc.)\r\nuseEffect(() => {\r\n  const audio = audioRef.current;\r\n  if (!audio || !selectedAudioSegment || !isAudioPlaying) return;\r\n\r\n  audio.currentTime = selectedAudioSegment.sourceStart;\r\n  safePlay(audio);\r\n}, [selectedAudioSegment, selectedAudioAsset, isAudioPlaying]);\r\n\r\n\r\n  // Stop playback when segment duration ends\r\n  useEffect(() => {\r\n  const video = videoRef.current;\r\n  if (!video || !selectedVideoSegment) return;\r\n\r\n  const stopAt = selectedVideoSegment.sourceStart + selectedVideoSegment.duration;\r\n\r\n  const onTimeUpdate = () => {\r\n    if (!isPlaying) return;\r\n\r\n    if (video.currentTime >= stopAt) {\r\n      const next = getNextVideoSegment();\r\n\r\n      if (next) {\r\n        // Solo cambiamos el segmento; el efecto de arriba se encarga de recolocar y dar play.\r\n        setSelectedVideoSegmentId(next.id);\r\n      } else {\r\n        setIsPlaying(false);\r\n        video.pause();\r\n      }\r\n    }\r\n  };\r\n\r\n  video.addEventListener(\"timeupdate\", onTimeUpdate);\r\n  return () => video.removeEventListener(\"timeupdate\", onTimeUpdate);\r\n}, [selectedVideoSegment, isPlaying, videoSegments]);\r\n\r\n\r\n  // Auto-play next audio segment\r\nuseEffect(() => {\r\n  const audio = audioRef.current;\r\n  if (!audio || !selectedAudioSegment) return;\r\n\r\n  const stopAt = selectedAudioSegment.sourceStart + selectedAudioSegment.duration;\r\n\r\n  const onTimeUpdate = () => {\r\n    if (!isAudioPlaying) return;\r\n\r\n    if (audio.currentTime >= stopAt) {\r\n      const sorted = [...audioSegments].sort((a, b) => a.timelineStart - b.timelineStart);\r\n      const idx = sorted.findIndex(s => s.id === selectedAudioSegment.id);\r\n      const next = sorted[idx + 1];\r\n\r\n      if (next) {\r\n        // Solo cambiamos de segmento: el efecto de arriba se encarga de recolocar y hacer play\r\n        setSelectedAudioSegmentId(next.id);\r\n      } else {\r\n        setIsAudioPlaying(false);\r\n        audio.pause();\r\n      }\r\n    }\r\n  };\r\n\r\n  audio.addEventListener(\"timeupdate\", onTimeUpdate);\r\n  return () => audio.removeEventListener(\"timeupdate\", onTimeUpdate);\r\n}, [selectedAudioSegment, audioSegments, isAudioPlaying]);\r\n\r\n\r\n\r\n  // Segment editing helpers\r\n  const updateVideoSegment = (id: Id, patch: Partial<VideoSegment>) => {\r\n    setVideoSegments(prev => prev.map(s => (s.id === id ? { ...s, ...patch } : s)));\r\n  };\r\n\r\n  const updateAudioSegment = (id: Id, patch: Partial<AudioSegment>) => {\r\n    setAudioSegments(prev => prev.map(s => (s.id === id ? { ...s, ...patch } : s)));\r\n  };\r\n\r\n  const deleteVideoSegment = (id: Id) => {\r\n    setVideoSegments(prev => prev.filter(s => s.id !== id));\r\n    if (selectedVideoSegmentId === id) setSelectedVideoSegmentId(null);\r\n  };\r\n\r\n  const deleteAudioSegment = (id: Id) => {\r\n    setAudioSegments(prev => prev.filter(s => s.id !== id));\r\n    if (selectedAudioSegmentId === id) setSelectedAudioSegmentId(null);\r\n  };\r\n\r\n  // Drag state\r\nconst dragState = useRef<{\r\n  id: string | null;\r\n  initialX: number;\r\n  initialOffset: number;\r\n} | null>(null);\r\n\r\nconst resizeState = useRef<{\r\n  id: string | null;\r\n  edge: \"left\" | \"right\";\r\n  initialX: number;\r\n  initialSourceStart: number;\r\n  initialDuration: number;\r\n} | null>(null);\r\n\r\n\r\n// Start drag\r\nconst onSegmentMouseDown = (\r\n  e: React.MouseEvent,\r\n  segmentId: string,\r\n  initialTimelineStart: number\r\n) => {\r\n  dragState.current = {\r\n    id: segmentId,\r\n    initialX: e.clientX,\r\n    initialOffset: initialTimelineStart,\r\n  };\r\n};\r\n\r\n// Handle drag movement globally\r\nuseEffect(() => {\r\n    const onMouseMove = (e: MouseEvent) => {\r\n    if (dragState.current) {\r\n      const deltaPx = e.clientX - dragState.current.initialX;\r\n      const deltaSec = deltaPx / PIXELS_PER_SECOND;\r\n\r\n      const updated = dragState.current.initialOffset + deltaSec;\r\n\r\n      setVideoSegments(prev =>\r\n        prev.map(seg =>\r\n          seg.id === dragState.current!.id ? { ...seg, timelineStart: Math.max(0, updated) } : seg\r\n        )\r\n      );\r\n\r\n      setAudioSegments(prev =>\r\n        prev.map(seg =>\r\n          seg.id === dragState.current!.id ? { ...seg, timelineStart: Math.max(0, updated) } : seg\r\n        )\r\n      );\r\n    }\r\n\r\n    if (resizeState.current) {\r\n      onResize(e);\r\n    }\r\n  };\r\n\r\n  \r\n\r\n\r\n  // Resize logic\r\nconst onResize = (e: MouseEvent) => {\r\n  if (!resizeState.current) return;\r\n\r\n  const deltaPx = e.clientX - resizeState.current.initialX;\r\n  const deltaSecs = deltaPx / PIXELS_PER_SECOND;\r\n\r\n  setVideoSegments(prev =>\r\n    prev.map(seg => {\r\n      if (seg.id !== resizeState.current!.id) return seg;\r\n\r\n      let newStart = resizeState.current!.initialSourceStart;\r\n      let newDuration = resizeState.current!.initialDuration;\r\n\r\n      if (resizeState.current!.edge === \"left\") {\r\n        newStart = Math.max(0, resizeState.current!.initialSourceStart + deltaSecs);\r\n        newDuration = resizeState.current!.initialDuration - deltaSecs;\r\n      } else {\r\n        newDuration = resizeState.current!.initialDuration + deltaSecs;\r\n      }\r\n\r\n      // Clamp duration\r\n      const asset = videoAssets.find(a => a.id === seg.assetId);\r\n      const max = asset?.duration ?? Infinity;\r\n      newDuration = Math.max(0.1, Math.min(newDuration, max - newStart));\r\n\r\n      return { ...seg, sourceStart: newStart, duration: newDuration };\r\n    })\r\n  );\r\n\r\n    setAudioSegments(prev =>\r\n      prev.map(seg => {\r\n        if (seg.id !== resizeState.current!.id) return seg;\r\n\r\n        let newStart = resizeState.current!.initialSourceStart;\r\n        let newDuration = resizeState.current!.initialDuration;\r\n\r\n        if (resizeState.current!.edge === \"left\") {\r\n          newStart = Math.max(0, resizeState.current!.initialSourceStart + deltaSecs);\r\n          newDuration = resizeState.current!.initialDuration - deltaSecs;\r\n        } else {\r\n          newDuration = resizeState.current!.initialDuration + deltaSecs;\r\n        }\r\n\r\n        const asset = audioAssets.find(a => a.id === seg.assetId);\r\n        const max = asset?.duration ?? Infinity;\r\n        newDuration = Math.max(0.1, Math.min(newDuration, max - newStart));\r\n\r\n        return { ...seg, sourceStart: newStart, duration: newDuration };\r\n      })\r\n    );\r\n  };\r\n\r\n\r\n  const onMouseUp = () => {\r\n  dragState.current = null;\r\n  resizeState.current = null;\r\n};\r\n\r\n\r\n  window.addEventListener(\"mousemove\", onMouseMove);\r\n  window.addEventListener(\"mouseup\", onMouseUp);\r\n\r\n  return () => {\r\n    window.removeEventListener(\"mousemove\", onMouseMove);\r\n    window.removeEventListener(\"mouseup\", onMouseUp);\r\n  };\r\n}, []);\r\n\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", height: \"100vh\" }}>\r\n      {/* LEFT PANEL */}\r\n      <aside style={{ width: 260, borderRight: \"1px solid #ddd\", padding: 12 }}>\r\n        <h2>Assets</h2>\r\n\r\n        {/* Video Upload */}\r\n        <h3>Vídeos</h3>\r\n        <input type=\"file\" accept=\"video/*\" multiple onChange={handleVideoUpload} />\r\n        <ul style={{ maxHeight: 150, overflowY: \"auto\", padding: 0 }}>\r\n          {videoAssets.map(asset => (\r\n            <li key={asset.id}>\r\n              {asset.name}\r\n              <button onClick={() => addVideoToTimeline(asset)}>+ Timeline</button>\r\n              {!asset.duration && (\r\n                <video\r\n                  src={asset.url}\r\n                  style={{ display: \"none\" }}\r\n                  onLoadedMetadata={(e) => handleVideoLoadedMetadata(asset.id, e.currentTarget.duration)}\r\n                />\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        {/* Audio upload */}\r\n        <h3>Audios</h3>\r\n        <input type=\"file\" accept=\"audio/*\" multiple onChange={handleAudioUpload} />\r\n        <ul style={{ maxHeight: 150, overflowY: \"auto\", padding: 0 }}>\r\n          {audioAssets.map(asset => (\r\n            <li key={asset.id}>\r\n              {asset.name}\r\n              <button onClick={() => addAudioToTimeline(asset)}>+ Timeline</button>\r\n              {!asset.duration && (\r\n                <audio\r\n                  src={asset.url}\r\n                  style={{ display: \"none\" }}\r\n                  onLoadedMetadata={(e) => handleAudioLoadedMetadata(asset.id, e.currentTarget.duration)}\r\n                />\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </aside>\r\n\r\n      {/* MAIN */}\r\n      <main style={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\r\n        <header style={{ padding: 10, borderBottom: \"1px solid #ddd\" }}>\r\n          <strong>Proyecto sin nombre</strong>\r\n        </header>\r\n\r\n        {/* Preview */}\r\n        <section style={{ display: \"flex\", padding: 12, gap: 16, borderBottom: \"1px solid #eee\" }}>\r\n          {/* Video preview */}\r\n          <div style={{ flex: 2 }}>\r\n            <h3>Preview</h3>\r\n            <div style={{ background: \"#000\", height: 300, display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n              {selectedVideoAsset ? (\r\n                <video ref={videoRef} src={selectedVideoAsset.url} style={{ maxWidth: \"100%\", maxHeight: \"100%\" }} />\r\n              ) : (\r\n                <span style={{ color: \"#aaa\" }}>Selecciona un segmento</span>\r\n              )}\r\n            </div>\r\n\r\n            <button onClick={togglePlayback} disabled={videoSegments.length === 0}>\r\n              {isPlaying ? \"⏸ Pause\" : \"▶ Play\"}\r\n            </button>\r\n\r\n          </div>\r\n\r\n          {/* Audio preview */}\r\n          <div style={{ flex: 1 }}>\r\n            <h3>Audio seleccionado</h3>\r\n            {selectedAudioAsset ? (\r\n              <>\r\n                <p>{selectedAudioAsset.name}</p>\r\n                <audio ref={audioRef} src={selectedAudioAsset.url} controls style={{ width: \"100%\" }} />\r\n                {selectedAudioAsset ? (\r\n                <>\r\n                  <p>{selectedAudioAsset.name}</p>\r\n                  <audio ref={audioRef} src={selectedAudioAsset.url} controls style={{ width: \"100%\" }} />\r\n                  <div style={{ marginTop: 8 }}>\r\n                    <button onClick={toggleAudioPlayback} disabled={audioSegments.length === 0}>\r\n                      {isAudioPlaying ? \"⏸ Pause audio\" : \"▶ Play audio\"}\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <span style={{ color: \"#aaa\" }}>Selecciona audio</span>\r\n              )}\r\n\r\n              </>\r\n            ) : (\r\n              <span style={{ color: \"#aaa\" }}>Selecciona audio</span>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        {/* TIMELINE */}\r\n        <section style={{ flex: 1, display: \"flex\", flexDirection: \"column\", padding: 12 }}>\r\n          {/* VIDEO TRACK */}\r\n          <h4>Vídeo</h4>\r\n          <div style={{ border: \"1px solid #ccc\", minHeight: 60, display: \"flex\", gap: 8, overflowX: \"auto\" }}>\r\n            {videoSegments.map(seg => {\r\n              const asset = videoAssets.find(a => a.id === seg.assetId);\r\n              const isSelected = seg.id === selectedVideoSegmentId;\r\n              return (\r\n                <div\r\n                  key={seg.id}\r\n                  onMouseDown={(e) => onSegmentMouseDown(e, seg.id, seg.timelineStart)}\r\n                  onClick={() => setSelectedVideoSegmentId(seg.id)}\r\n                  style={{\r\n                    position: \"relative\",\r\n                    marginLeft: `${seg.timelineStart * PIXELS_PER_SECOND}px`,\r\n                    width: `${seg.duration * PIXELS_PER_SECOND}px`,\r\n                    padding: \"4px\",\r\n                    borderRadius: \"4px\",\r\n                    border: isSelected ? \"2px solid #2563eb\" : \"1px solid #ccc\",\r\n                    background: isSelected ? \"#eff6ff\" : \"#f9fafb\",\r\n                    cursor: \"grab\",\r\n                    fontSize: \"0.8rem\",\r\n                  }}\r\n                >\r\n                  {/* LEFT resize handle */}\r\n                  <div\r\n                    onMouseDown={(e) => {\r\n                      e.stopPropagation();\r\n                      resizeState.current = {\r\n                        id: seg.id,\r\n                        edge: \"left\",\r\n                        initialX: e.clientX,\r\n                        initialSourceStart: seg.sourceStart,\r\n                        initialDuration: seg.duration,\r\n                      };\r\n                    }}\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      left: 0,\r\n                      top: 0,\r\n                      bottom: 0,\r\n                      width: \"6px\",\r\n                      background: \"rgba(0,0,0,0.2)\",\r\n                      cursor: \"ew-resize\",\r\n                    }}\r\n                  />\r\n\r\n                  {/* RIGHT resize handle */}\r\n                  <div\r\n                    onMouseDown={(e) => {\r\n                      e.stopPropagation();\r\n                      resizeState.current = {\r\n                        id: seg.id,\r\n                        edge: \"right\",\r\n                        initialX: e.clientX,\r\n                        initialSourceStart: seg.sourceStart,\r\n                        initialDuration: seg.duration,\r\n                      };\r\n                    }}\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      right: 0,\r\n                      top: 0,\r\n                      bottom: 0,\r\n                      width: \"6px\",\r\n                      background: \"rgba(0,0,0,0.2)\",\r\n                      cursor: \"ew-resize\",\r\n                    }}\r\n                  />\r\n\r\n                  <strong>{asset?.name ?? \"Clip\"}</strong>\r\n                </div>\r\n\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {selectedVideoSegment && (\r\n            <div style={{ border: \"1px solid #ddd\", padding: 8, marginTop: 8 }}>\r\n              <strong>Editar segmento vídeo</strong>\r\n              <label>\r\n                Source start:\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  value={selectedVideoSegment.sourceStart}\r\n                  onChange={(e) =>\r\n                    updateVideoSegment(selectedVideoSegment.id, { sourceStart: Number(e.target.value) })\r\n                  }\r\n                />\r\n              </label>\r\n              <label>\r\n                Duration:\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  value={selectedVideoSegment.duration}\r\n                  onChange={(e) =>\r\n                    updateVideoSegment(selectedVideoSegment.id, { duration: Number(e.target.value) })\r\n                  }\r\n                />\r\n              </label>\r\n              <label>\r\n                Timeline start:\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  value={selectedVideoSegment.timelineStart}\r\n                  onChange={(e) =>\r\n                    updateVideoSegment(selectedVideoSegment.id, { timelineStart: Number(e.target.value) })\r\n                  }\r\n                />\r\n              </label>\r\n            </div>\r\n          )}\r\n\r\n          {/* AUDIO TRACK */}\r\n          <h4>Audio</h4>\r\n          <div style={{ border: \"1px solid #ccc\", minHeight: 60, display: \"flex\", gap: 8, overflowX: \"auto\" }}>\r\n            {audioSegments.map(seg => {\r\n              const asset = audioAssets.find(a => a.id === seg.assetId);\r\n              const isSelected = seg.id === selectedAudioSegmentId;\r\n              return (\r\n                <div\r\n                  key={seg.id}\r\n                  onMouseDown={(e) => onSegmentMouseDown(e, seg.id, seg.timelineStart)}\r\n                  onClick={() => setSelectedAudioSegmentId(seg.id)}\r\n                  style={{\r\n                    position: \"relative\",\r\n                    marginLeft: `${seg.timelineStart * PIXELS_PER_SECOND}px`,\r\n                    width: `${seg.duration * PIXELS_PER_SECOND}px`,\r\n                    padding: \"4px\",\r\n                    borderRadius: \"4px\",\r\n                    border: isSelected ? \"2px solid #2563eb\" : \"1px solid #ccc\",\r\n                    background: isSelected ? \"#eff6ff\" : \"#f9fafb\",\r\n                    cursor: \"grab\",\r\n                    fontSize: \"0.8rem\",\r\n                  }}\r\n                >\r\n                  {/* LEFT resize handle */}\r\n                  <div\r\n                    onMouseDown={(e) => {\r\n                      e.stopPropagation();\r\n                      resizeState.current = {\r\n                        id: seg.id,\r\n                        edge: \"left\",\r\n                        initialX: e.clientX,\r\n                        initialSourceStart: seg.sourceStart,\r\n                        initialDuration: seg.duration,\r\n                      };\r\n                    }}\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      left: 0,\r\n                      top: 0,\r\n                      bottom: 0,\r\n                      width: \"6px\",\r\n                      background: \"rgba(0,0,0,0.2)\",\r\n                      cursor: \"ew-resize\",\r\n                    }}\r\n                  />\r\n\r\n                  {/* RIGHT resize handle */}\r\n                  <div\r\n                    onMouseDown={(e) => {\r\n                      e.stopPropagation();\r\n                      resizeState.current = {\r\n                        id: seg.id,\r\n                        edge: \"right\",\r\n                        initialX: e.clientX,\r\n                        initialSourceStart: seg.sourceStart,\r\n                        initialDuration: seg.duration,\r\n                      };\r\n                    }}\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      right: 0,\r\n                      top: 0,\r\n                      bottom: 0,\r\n                      width: \"6px\",\r\n                      background: \"rgba(0,0,0,0.2)\",\r\n                      cursor: \"ew-resize\",\r\n                    }}\r\n                  />\r\n\r\n                  <strong>{asset?.name ?? \"Clip\"}</strong>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {selectedAudioSegment && (\r\n            <div style={{ border: \"1px solid #ddd\", padding: 8, marginTop: 8 }}>\r\n              <strong>Editar segmento audio</strong>\r\n              <label>\r\n                Source start:\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  value={selectedAudioSegment.sourceStart}\r\n                  onChange={(e) =>\r\n                    updateAudioSegment(selectedAudioSegment.id, { sourceStart: Number(e.target.value) })\r\n                  }\r\n                />\r\n              </label>\r\n              <label>\r\n                Duration:\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  value={selectedAudioSegment.duration}\r\n                  onChange={(e) =>\r\n                    updateAudioSegment(selectedAudioSegment.id, { duration: Number(e.target.value) })\r\n                  }\r\n                />\r\n              </label>\r\n              <label>\r\n                Timeline start:\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  value={selectedAudioSegment.timelineStart}\r\n                  onChange={(e) =>\r\n                    updateAudioSegment(selectedAudioSegment.id, { timelineStart: Number(e.target.value) })\r\n                  }\r\n                />\r\n              </label>\r\n            </div>\r\n          )}\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}