{"ast":null,"code":"var _jsxFileName = \"/home/pedro/hackthon-polonia/src/VideoEditor.tsx\",\n  _s = $RefreshSig$();\n// src/VideoEditor.tsx\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction createId() {\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\n}\nconst VideoEditor = () => {\n  _s();\n  // Assets\n  const [videoAssets, setVideoAssets] = useState([]);\n  const [audioAssets, setAudioAssets] = useState([]);\n\n  // Timeline\n  const [videoSegments, setVideoSegments] = useState([]);\n  const [audioSegments, setAudioSegments] = useState([]);\n\n  // Selección\n  const [selectedVideoSegmentId, setSelectedVideoSegmentId] = useState(null);\n  const [selectedAudioSegmentId, setSelectedAudioSegmentId] = useState(null);\n\n  // Reproductores\n  const videoRef = useRef(null);\n  const audioRef = useRef(null);\n\n  // --- NUEVO: reproducción secuencial de la timeline ---\n  const [isTimelinePlaying, setIsTimelinePlaying] = useState(false);\n  const [currentTimelineIndex, setCurrentTimelineIndex] = useState(null);\n  const selectedVideoSegment = videoSegments.find(s => s.id === selectedVideoSegmentId) || null;\n  const selectedVideoAsset = selectedVideoSegment ? videoAssets.find(a => a.id === selectedVideoSegment.assetId) || null : null;\n  const selectedAudioSegment = audioSegments.find(s => s.id === selectedAudioSegmentId) || null;\n  const selectedAudioAsset = selectedAudioSegment ? audioAssets.find(a => a.id === selectedAudioSegment.assetId) || null : null;\n\n  // --- NUEVO: cuando estamos reproduciendo la timeline y cambia de segmento,\n  // colocamos el vídeo al inicio de ese segmento y le damos play.\n  useEffect(() => {\n    if (!isTimelinePlaying) return;\n    const video = videoRef.current;\n    if (!video || !selectedVideoSegment) return;\n    (async () => {\n      await smoothSeek(video, selectedVideoSegment.start);\n      video.play();\n    })();\n  }, [isTimelinePlaying, selectedVideoSegment]);\n\n  // Manejar subida de vídeos\n  const handleVideoUpload = e => {\n    const files = e.target.files;\n    if (!files) return;\n    const newAssets = [];\n    Array.from(files).forEach(file => {\n      const url = URL.createObjectURL(file);\n      newAssets.push({\n        id: createId(),\n        name: file.name,\n        url\n      });\n    });\n    setVideoAssets(prev => [...prev, ...newAssets]);\n    e.target.value = \"\";\n  };\n\n  // Manejar subida de audios\n  const handleAudioUpload = e => {\n    const files = e.target.files;\n    if (!files) return;\n    const newAssets = [];\n    Array.from(files).forEach(file => {\n      const url = URL.createObjectURL(file);\n      newAssets.push({\n        id: createId(),\n        name: file.name,\n        url\n      });\n    });\n    setAudioAssets(prev => [...prev, ...newAssets]);\n    e.target.value = \"\";\n  };\n\n  // Añadir un vídeo a la timeline como segmento entero (0 → duración aprox 10s si no se conoce)\n  const addVideoToTimeline = asset => {\n    var _asset$duration;\n    const defaultDuration = (_asset$duration = asset.duration) !== null && _asset$duration !== void 0 ? _asset$duration : 10;\n    const segment = {\n      id: createId(),\n      assetId: asset.id,\n      start: 0,\n      end: defaultDuration\n    };\n    setVideoSegments(prev => [...prev, segment]);\n    setSelectedVideoSegmentId(segment.id);\n  };\n\n  // Añadir audio a la timeline (igual idea)\n  const addAudioToTimeline = asset => {\n    var _asset$duration2;\n    const defaultDuration = (_asset$duration2 = asset.duration) !== null && _asset$duration2 !== void 0 ? _asset$duration2 : 10;\n    const segment = {\n      id: createId(),\n      assetId: asset.id,\n      start: 0,\n      end: defaultDuration\n    };\n    setAudioSegments(prev => [...prev, segment]);\n    setSelectedAudioSegmentId(segment.id);\n  };\n\n  // Actualizar metadatos duration de vídeos cuando se cargan\n  const handleVideoLoadedMetadata = (assetId, duration) => {\n    setVideoAssets(prev => prev.map(a => a.id === assetId ? {\n      ...a,\n      duration\n    } : a));\n  };\n  const handleAudioLoadedMetadata = (assetId, duration) => {\n    setAudioAssets(prev => prev.map(a => a.id === assetId ? {\n      ...a,\n      duration\n    } : a));\n  };\n\n  // Reproducción limitada al segmento seleccionado\n  const handlePlay = () => {\n    if (!videoRef.current || !selectedVideoSegment || !selectedVideoAsset) return;\n    const video = videoRef.current;\n    (async () => {\n      await smoothSeek(video, selectedVideoSegment.start);\n      video.play();\n    })();\n  };\n\n  // Pausar\n  const handlePause = () => {\n    if (videoRef.current) videoRef.current.pause();\n  };\n\n  // --- NUEVO: reproducir / pausar la timeline completa ---\n  const handleToggleTimelinePlay = () => {\n    const video = videoRef.current;\n    if (!video) return;\n    if (videoSegments.length === 0) return;\n\n    // Si ya estamos reproduciendo la timeline → pausa\n    if (isTimelinePlaying) {\n      video.pause();\n      setIsTimelinePlaying(false);\n      return;\n    }\n\n    // Elegir desde qué segmento empezamos:\n    // - si hay uno seleccionado, empezamos desde ese\n    // - si no, desde el primero\n    const startIndexFromSelected = selectedVideoSegment ? videoSegments.findIndex(s => s.id === selectedVideoSegment.id) : 0;\n    const startIndex = startIndexFromSelected >= 0 ? startIndexFromSelected : 0;\n    const firstSeg = videoSegments[startIndex];\n    setCurrentTimelineIndex(startIndex);\n    setSelectedVideoSegmentId(firstSeg.id); // el efecto de arriba colocará el vídeo y hará play\n    setIsTimelinePlaying(true);\n  };\n\n  // Parar al llegar al final del segmento\n  // y, si estamos en modo \"timeline\", saltar al siguiente segmento\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    const onTimeUpdate = () => {\n      if (!selectedVideoSegment) return;\n      if (video.currentTime >= selectedVideoSegment.end) {\n        // Si NO estamos reproduciendo la timeline, se comporta como antes\n        if (!isTimelinePlaying) {\n          video.pause();\n          return;\n        }\n\n        // Si estamos en modo timeline, pasar al siguiente segmento\n        setCurrentTimelineIndex(prev => {\n          if (prev == null) return prev;\n          const nextIndex = prev + 1;\n\n          // Si no hay más segmentos → parar\n          if (nextIndex >= videoSegments.length) {\n            video.pause();\n            setIsTimelinePlaying(false);\n            return null;\n          }\n          const nextSeg = videoSegments[nextIndex];\n          setSelectedVideoSegmentId(nextSeg.id); // esto hará que el otro useEffect lo coloque y haga play\n          return nextIndex;\n        });\n      }\n    };\n    video.addEventListener(\"timeupdate\", onTimeUpdate);\n    return () => {\n      video.removeEventListener(\"timeupdate\", onTimeUpdate);\n    };\n  }, [selectedVideoSegment, isTimelinePlaying, videoSegments]);\n\n  // Cambiar valores de un segmento de vídeo\n  const updateVideoSegment = (id, patch) => {\n    setVideoSegments(prev => prev.map(s => s.id === id ? {\n      ...s,\n      ...patch\n    } : s));\n  };\n  const deleteVideoSegment = id => {\n    setVideoSegments(prev => prev.filter(s => s.id !== id));\n    if (selectedVideoSegmentId === id) setSelectedVideoSegmentId(null);\n  };\n\n  // Cambiar valores de un segmento de audio\n  const updateAudioSegment = (id, patch) => {\n    setAudioSegments(prev => prev.map(s => s.id === id ? {\n      ...s,\n      ...patch\n    } : s));\n  };\n  const deleteAudioSegment = id => {\n    setAudioSegments(prev => prev.filter(s => s.id !== id));\n    if (selectedAudioSegmentId === id) setSelectedAudioSegmentId(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"100vh\",\n      fontFamily: \"system-ui, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      style: {\n        width: \"260px\",\n        borderRight: \"1px solid #ddd\",\n        padding: \"12px\",\n        boxSizing: \"border-box\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: \"1.1rem\",\n          marginBottom: \"8px\"\n        },\n        children: \"Assets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"16px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: \"0.95rem\"\n          },\n          children: \"V\\xEDdeos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"video/*\",\n          multiple: true,\n          onChange: handleVideoUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyle: \"none\",\n            padding: 0,\n            marginTop: \"8px\",\n            maxHeight: \"150px\",\n            overflowY: \"auto\"\n          },\n          children: videoAssets.map(asset => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: \"6px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                gap: \"4px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"0.85rem\",\n                  overflow: \"hidden\",\n                  textOverflow: \"ellipsis\",\n                  whiteSpace: \"nowrap\"\n                },\n                children: asset.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  fontSize: \"0.75rem\"\n                },\n                onClick: () => addVideoToTimeline(asset),\n                children: \"+ Timeline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), !asset.duration && /*#__PURE__*/_jsxDEV(\"video\", {\n              src: asset.url,\n              style: {\n                display: \"none\"\n              },\n              onLoadedMetadata: e => handleVideoLoadedMetadata(asset.id, e.currentTarget.duration)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 19\n            }, this)]\n          }, asset.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: \"0.95rem\"\n          },\n          children: \"Audios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"audio/*\",\n          multiple: true,\n          onChange: handleAudioUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyle: \"none\",\n            padding: 0,\n            marginTop: \"8px\",\n            maxHeight: \"150px\",\n            overflowY: \"auto\"\n          },\n          children: audioAssets.map(asset => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: \"6px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                gap: \"4px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"0.85rem\",\n                  overflow: \"hidden\",\n                  textOverflow: \"ellipsis\",\n                  whiteSpace: \"nowrap\"\n                },\n                children: asset.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  fontSize: \"0.75rem\"\n                },\n                onClick: () => addAudioToTimeline(asset),\n                children: \"+ Timeline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this), !asset.duration && /*#__PURE__*/_jsxDEV(\"audio\", {\n              src: asset.url,\n              style: {\n                display: \"none\"\n              },\n              onLoadedMetadata: e => handleAudioLoadedMetadata(asset.id, e.currentTarget.duration)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 19\n            }, this)]\n          }, asset.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      style: {\n        flex: 1,\n        display: \"flex\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        style: {\n          padding: \"10px 12px\",\n          borderBottom: \"1px solid #ddd\",\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Proyecto sin nombre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: true,\n          style: {\n            opacity: 0.6\n          },\n          children: \"Exportar (mock)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        style: {\n          padding: \"12px\",\n          display: \"flex\",\n          gap: \"16px\",\n          borderBottom: \"1px solid #eee\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: \"0.95rem\",\n              marginBottom: \"8px\"\n            },\n            children: \"Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: \"#000\",\n              borderRadius: \"4px\",\n              overflow: \"hidden\",\n              maxWidth: \"100%\",\n              height: \"320px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\"\n            },\n            children: selectedVideoAsset ? /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              src: selectedVideoAsset.url,\n              style: {\n                maxWidth: \"100%\",\n                maxHeight: \"100%\"\n              },\n              controls: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"#aaa\",\n                fontSize: \"0.9rem\"\n              },\n              children: \"Selecciona un segmento de v\\xEDdeo en la timeline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: \"8px\",\n              display: \"flex\",\n              gap: \"8px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleToggleTimelinePlay,\n              disabled: videoSegments.length === 0,\n              children: isTimelinePlaying ? \"⏸ Pausar timeline\" : \"▶ Play timeline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: \"0.95rem\",\n              marginBottom: \"8px\"\n            },\n            children: \"Audio seleccionado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), selectedAudioAsset ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: \"0.85rem\"\n              },\n              children: selectedAudioAsset.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n              ref: audioRef,\n              src: selectedAudioAsset.url,\n              controls: true,\n              style: {\n                width: \"100%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"#aaa\",\n              fontSize: \"0.9rem\"\n            },\n            children: \"Selecciona un segmento de audio en la timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        style: {\n          flex: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n          padding: \"12px\",\n          gap: \"8px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: \"0.95rem\"\n          },\n          children: \"Timeline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"12px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"0.85rem\",\n              marginBottom: \"4px\"\n            },\n            children: \"V\\xEDdeo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: \"1px solid #ccc\",\n              borderRadius: \"4px\",\n              padding: \"6px\",\n              minHeight: \"60px\",\n              display: \"flex\",\n              gap: \"8px\",\n              overflowX: \"auto\"\n            },\n            children: [videoSegments.length === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"0.8rem\",\n                color: \"#888\"\n              },\n              children: \"Arrastra v\\xEDdeos a la timeline utilizando el bot\\xF3n \\u201C+ Timeline\\u201D.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), videoSegments.map(seg => {\n              var _asset$name;\n              const asset = videoAssets.find(a => a.id === seg.assetId);\n              const isSelected = seg.id === selectedVideoSegmentId;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setSelectedVideoSegmentId(seg.id),\n                style: {\n                  minWidth: \"160px\",\n                  padding: \"4px\",\n                  borderRadius: \"4px\",\n                  border: isSelected ? \"2px solid #2563eb\" : \"1px solid #ccc\",\n                  background: isSelected ? \"#eff6ff\" : \"#f9fafb\",\n                  cursor: \"pointer\",\n                  fontSize: \"0.8rem\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 600,\n                    marginBottom: \"2px\"\n                  },\n                  children: (_asset$name = asset === null || asset === void 0 ? void 0 : asset.name) !== null && _asset$name !== void 0 ? _asset$name : \"Video\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"start: \", seg.start.toFixed(2), \"s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"end: \", seg.end.toFixed(2), \"s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    marginTop: \"4px\",\n                    fontSize: \"0.7rem\"\n                  },\n                  onClick: e => {\n                    e.stopPropagation();\n                    deleteVideoSegment(seg.id);\n                  },\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 21\n                }, this)]\n              }, seg.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), selectedVideoSegment && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: \"8px\",\n              padding: \"8px\",\n              borderRadius: \"4px\",\n              border: \"1px solid #ddd\",\n              fontSize: \"0.8rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: \"4px\",\n                fontWeight: 600\n              },\n              children: \"Editar segmento de v\\xEDdeo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                gap: \"8px\",\n                alignItems: \"center\",\n                marginBottom: \"4px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"start (s):\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: selectedVideoSegment.start,\n                  onChange: e => updateVideoSegment(selectedVideoSegment.id, {\n                    start: Number(e.target.value) || 0\n                  }),\n                  style: {\n                    width: \"80px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"end (s):\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: selectedVideoSegment.end,\n                  onChange: e => updateVideoSegment(selectedVideoSegment.id, {\n                    end: Number(e.target.value) || 0\n                  }),\n                  style: {\n                    width: \"80px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"0.85rem\",\n              marginBottom: \"4px\"\n            },\n            children: \"Audio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: \"1px solid #ccc\",\n              borderRadius: \"4px\",\n              padding: \"6px\",\n              minHeight: \"60px\",\n              display: \"flex\",\n              gap: \"8px\",\n              overflowX: \"auto\"\n            },\n            children: [audioSegments.length === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"0.8rem\",\n                color: \"#888\"\n              },\n              children: \"A\\xF1ade audios a la timeline con el bot\\xF3n \\u201C+ Timeline\\u201D.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this), audioSegments.map(seg => {\n              var _asset$name2;\n              const asset = audioAssets.find(a => a.id === seg.assetId);\n              const isSelected = seg.id === selectedAudioSegmentId;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setSelectedAudioSegmentId(seg.id),\n                style: {\n                  minWidth: \"160px\",\n                  padding: \"4px\",\n                  borderRadius: \"4px\",\n                  border: isSelected ? \"2px solid #16a34a\" : \"1px solid #ccc\",\n                  background: isSelected ? \"#ecfdf3\" : \"#f9fafb\",\n                  cursor: \"pointer\",\n                  fontSize: \"0.8rem\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 600,\n                    marginBottom: \"2px\"\n                  },\n                  children: (_asset$name2 = asset === null || asset === void 0 ? void 0 : asset.name) !== null && _asset$name2 !== void 0 ? _asset$name2 : \"Audio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"start: \", seg.start.toFixed(2), \"s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"end: \", seg.end.toFixed(2), \"s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    marginTop: \"4px\",\n                    fontSize: \"0.7rem\"\n                  },\n                  onClick: e => {\n                    e.stopPropagation();\n                    deleteAudioSegment(seg.id);\n                  },\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 21\n                }, this)]\n              }, seg.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 13\n          }, this), selectedAudioSegment && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: \"8px\",\n              padding: \"8px\",\n              borderRadius: \"4px\",\n              border: \"1px solid #ddd\",\n              fontSize: \"0.8rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: \"4px\",\n                fontWeight: 600\n              },\n              children: \"Editar segmento de audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                gap: \"8px\",\n                alignItems: \"center\",\n                marginBottom: \"4px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"start (s):\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: selectedAudioSegment.start,\n                  onChange: e => updateAudioSegment(selectedAudioSegment.id, {\n                    start: Number(e.target.value) || 0\n                  }),\n                  style: {\n                    width: \"80px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"end (s):\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: selectedAudioSegment.end,\n                  onChange: e => updateAudioSegment(selectedAudioSegment.id, {\n                    end: Number(e.target.value) || 0\n                  }),\n                  style: {\n                    width: \"80px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoEditor, \"uenhWmmti/hftSDuuCNAgHXJp50=\");\n_c = VideoEditor;\nexport default VideoEditor;\nvar _c;\n$RefreshReg$(_c, \"VideoEditor\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","createId","Math","random","toString","slice","Date","now","VideoEditor","_s","videoAssets","setVideoAssets","audioAssets","setAudioAssets","videoSegments","setVideoSegments","audioSegments","setAudioSegments","selectedVideoSegmentId","setSelectedVideoSegmentId","selectedAudioSegmentId","setSelectedAudioSegmentId","videoRef","audioRef","isTimelinePlaying","setIsTimelinePlaying","currentTimelineIndex","setCurrentTimelineIndex","selectedVideoSegment","find","s","id","selectedVideoAsset","a","assetId","selectedAudioSegment","selectedAudioAsset","video","current","smoothSeek","start","play","handleVideoUpload","e","files","target","newAssets","Array","from","forEach","file","url","URL","createObjectURL","push","name","prev","value","handleAudioUpload","addVideoToTimeline","asset","_asset$duration","defaultDuration","duration","segment","end","addAudioToTimeline","_asset$duration2","handleVideoLoadedMetadata","map","handleAudioLoadedMetadata","handlePlay","handlePause","pause","handleToggleTimelinePlay","length","startIndexFromSelected","findIndex","startIndex","firstSeg","onTimeUpdate","currentTime","nextIndex","nextSeg","addEventListener","removeEventListener","updateVideoSegment","patch","deleteVideoSegment","filter","updateAudioSegment","deleteAudioSegment","style","display","height","fontFamily","children","width","borderRight","padding","boxSizing","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","multiple","onChange","listStyle","marginTop","maxHeight","overflowY","justifyContent","alignItems","gap","overflow","textOverflow","whiteSpace","onClick","src","onLoadedMetadata","currentTarget","flex","flexDirection","borderBottom","disabled","opacity","background","borderRadius","maxWidth","ref","controls","color","border","minHeight","overflowX","seg","_asset$name","isSelected","minWidth","cursor","fontWeight","toFixed","stopPropagation","step","Number","_asset$name2","_c","$RefreshReg$"],"sources":["/home/pedro/hackthon-polonia/src/VideoEditor.tsx"],"sourcesContent":["// src/VideoEditor.tsx\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n\r\ntype Id = string;\r\n\r\ntype VideoAsset = {\r\n  id: Id;\r\n  name: string;\r\n  url: string;\r\n  duration?: number; // en segundos, opcional\r\n};\r\n\r\ntype AudioAsset = {\r\n  id: Id;\r\n  name: string;\r\n  url: string;\r\n  duration?: number;\r\n};\r\n\r\ntype VideoSegment = {\r\n  id: Id;\r\n  assetId: Id;\r\n  start: number; // segundos\r\n  end: number;   // segundos\r\n};\r\n\r\ntype AudioSegment = {\r\n  id: Id;\r\n  assetId: Id;\r\n  start: number;\r\n  end: number;\r\n};\r\n\r\nfunction createId(): Id {\r\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\r\n}\r\n\r\nconst VideoEditor: React.FC = () => {\r\n  // Assets\r\n  const [videoAssets, setVideoAssets] = useState<VideoAsset[]>([]);\r\n  const [audioAssets, setAudioAssets] = useState<AudioAsset[]>([]);\r\n\r\n  // Timeline\r\n  const [videoSegments, setVideoSegments] = useState<VideoSegment[]>([]);\r\n  const [audioSegments, setAudioSegments] = useState<AudioSegment[]>([]);\r\n\r\n  // Selección\r\n  const [selectedVideoSegmentId, setSelectedVideoSegmentId] = useState<Id | null>(null);\r\n  const [selectedAudioSegmentId, setSelectedAudioSegmentId] = useState<Id | null>(null);\r\n\r\n  // Reproductores\r\n  const videoRef = useRef<HTMLVideoElement | null>(null);\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  // --- NUEVO: reproducción secuencial de la timeline ---\r\n  const [isTimelinePlaying, setIsTimelinePlaying] = useState(false);\r\n  const [currentTimelineIndex, setCurrentTimelineIndex] = useState<number | null>(null);\r\n\r\n\r\n  const selectedVideoSegment = videoSegments.find(s => s.id === selectedVideoSegmentId) || null;\r\n  const selectedVideoAsset = selectedVideoSegment\r\n    ? videoAssets.find(a => a.id === selectedVideoSegment.assetId) || null\r\n    : null;\r\n\r\n  const selectedAudioSegment = audioSegments.find(s => s.id === selectedAudioSegmentId) || null;\r\n  const selectedAudioAsset = selectedAudioSegment\r\n    ? audioAssets.find(a => a.id === selectedAudioSegment.assetId) || null\r\n    : null;\r\n\r\n    // --- NUEVO: cuando estamos reproduciendo la timeline y cambia de segmento,\r\n  // colocamos el vídeo al inicio de ese segmento y le damos play.\r\n  useEffect(() => {\r\n    if (!isTimelinePlaying) return;\r\n    const video = videoRef.current;\r\n    if (!video || !selectedVideoSegment) return;\r\n\r\n    (async () => {\r\n      await smoothSeek(video, selectedVideoSegment.start);\r\n      video.play();\r\n    })();\r\n\r\n  }, [isTimelinePlaying, selectedVideoSegment]);\r\n\r\n\r\n  // Manejar subida de vídeos\r\n  const handleVideoUpload: React.ChangeEventHandler<HTMLInputElement> = (e) => {\r\n    const files = e.target.files;\r\n    if (!files) return;\r\n\r\n    const newAssets: VideoAsset[] = [];\r\n    Array.from(files).forEach((file) => {\r\n      const url = URL.createObjectURL(file);\r\n      newAssets.push({\r\n        id: createId(),\r\n        name: file.name,\r\n        url,\r\n      });\r\n    });\r\n\r\n    setVideoAssets(prev => [...prev, ...newAssets]);\r\n    e.target.value = \"\";\r\n  };\r\n\r\n  // Manejar subida de audios\r\n  const handleAudioUpload: React.ChangeEventHandler<HTMLInputElement> = (e) => {\r\n    const files = e.target.files;\r\n    if (!files) return;\r\n\r\n    const newAssets: AudioAsset[] = [];\r\n    Array.from(files).forEach((file) => {\r\n      const url = URL.createObjectURL(file);\r\n      newAssets.push({\r\n        id: createId(),\r\n        name: file.name,\r\n        url,\r\n      });\r\n    });\r\n\r\n    setAudioAssets(prev => [...prev, ...newAssets]);\r\n    e.target.value = \"\";\r\n  };\r\n\r\n  // Añadir un vídeo a la timeline como segmento entero (0 → duración aprox 10s si no se conoce)\r\n  const addVideoToTimeline = (asset: VideoAsset) => {\r\n    const defaultDuration = asset.duration ?? 10;\r\n    const segment: VideoSegment = {\r\n      id: createId(),\r\n      assetId: asset.id,\r\n      start: 0,\r\n      end: defaultDuration,\r\n    };\r\n    setVideoSegments(prev => [...prev, segment]);\r\n    setSelectedVideoSegmentId(segment.id);\r\n  };\r\n\r\n  // Añadir audio a la timeline (igual idea)\r\n  const addAudioToTimeline = (asset: AudioAsset) => {\r\n    const defaultDuration = asset.duration ?? 10;\r\n    const segment: AudioSegment = {\r\n      id: createId(),\r\n      assetId: asset.id,\r\n      start: 0,\r\n      end: defaultDuration,\r\n    };\r\n    setAudioSegments(prev => [...prev, segment]);\r\n    setSelectedAudioSegmentId(segment.id);\r\n  };\r\n\r\n  // Actualizar metadatos duration de vídeos cuando se cargan\r\n  const handleVideoLoadedMetadata = (assetId: Id, duration: number) => {\r\n    setVideoAssets(prev =>\r\n      prev.map(a => a.id === assetId ? { ...a, duration } : a)\r\n    );\r\n  };\r\n\r\n  const handleAudioLoadedMetadata = (assetId: Id, duration: number) => {\r\n    setAudioAssets(prev =>\r\n      prev.map(a => a.id === assetId ? { ...a, duration } : a)\r\n    );\r\n  };\r\n\r\n  // Reproducción limitada al segmento seleccionado\r\n  const handlePlay = () => {\r\n    if (!videoRef.current || !selectedVideoSegment || !selectedVideoAsset) return;\r\n\r\n    const video = videoRef.current;\r\n    (async () => {\r\n      await smoothSeek(video, selectedVideoSegment.start);\r\n      video.play();\r\n    })();\r\n\r\n  };\r\n\r\n  // Pausar\r\n  const handlePause = () => {\r\n    if (videoRef.current) videoRef.current.pause();\r\n  };\r\n\r\n  // --- NUEVO: reproducir / pausar la timeline completa ---\r\n  const handleToggleTimelinePlay = () => {\r\n    const video = videoRef.current;\r\n    if (!video) return;\r\n    if (videoSegments.length === 0) return;\r\n\r\n    // Si ya estamos reproduciendo la timeline → pausa\r\n    if (isTimelinePlaying) {\r\n      video.pause();\r\n      setIsTimelinePlaying(false);\r\n      return;\r\n    }\r\n\r\n    // Elegir desde qué segmento empezamos:\r\n    // - si hay uno seleccionado, empezamos desde ese\r\n    // - si no, desde el primero\r\n    const startIndexFromSelected = selectedVideoSegment\r\n      ? videoSegments.findIndex(s => s.id === selectedVideoSegment.id)\r\n      : 0;\r\n\r\n    const startIndex =\r\n      startIndexFromSelected >= 0 ? startIndexFromSelected : 0;\r\n\r\n    const firstSeg = videoSegments[startIndex];\r\n\r\n    setCurrentTimelineIndex(startIndex);\r\n    setSelectedVideoSegmentId(firstSeg.id); // el efecto de arriba colocará el vídeo y hará play\r\n    setIsTimelinePlaying(true);\r\n  };\r\n\r\n\r\n  // Parar al llegar al final del segmento\r\n  // y, si estamos en modo \"timeline\", saltar al siguiente segmento\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video) return;\r\n\r\n    const onTimeUpdate = () => {\r\n      if (!selectedVideoSegment) return;\r\n\r\n      if (video.currentTime >= selectedVideoSegment.end) {\r\n        // Si NO estamos reproduciendo la timeline, se comporta como antes\r\n        if (!isTimelinePlaying) {\r\n          video.pause();\r\n          return;\r\n        }\r\n\r\n        // Si estamos en modo timeline, pasar al siguiente segmento\r\n        setCurrentTimelineIndex((prev) => {\r\n          if (prev == null) return prev;\r\n          const nextIndex = prev + 1;\r\n\r\n          // Si no hay más segmentos → parar\r\n          if (nextIndex >= videoSegments.length) {\r\n            video.pause();\r\n            setIsTimelinePlaying(false);\r\n            return null;\r\n          }\r\n\r\n          const nextSeg = videoSegments[nextIndex];\r\n          setSelectedVideoSegmentId(nextSeg.id); // esto hará que el otro useEffect lo coloque y haga play\r\n          return nextIndex;\r\n        });\r\n      }\r\n    };\r\n\r\n    video.addEventListener(\"timeupdate\", onTimeUpdate);\r\n    return () => {\r\n      video.removeEventListener(\"timeupdate\", onTimeUpdate);\r\n    };\r\n  }, [selectedVideoSegment, isTimelinePlaying, videoSegments]);\r\n\r\n\r\n  // Cambiar valores de un segmento de vídeo\r\n  const updateVideoSegment = (id: Id, patch: Partial<VideoSegment>) => {\r\n    setVideoSegments(prev =>\r\n      prev.map(s => s.id === id ? { ...s, ...patch } : s)\r\n    );\r\n  };\r\n\r\n  const deleteVideoSegment = (id: Id) => {\r\n    setVideoSegments(prev => prev.filter(s => s.id !== id));\r\n    if (selectedVideoSegmentId === id) setSelectedVideoSegmentId(null);\r\n  };\r\n\r\n  // Cambiar valores de un segmento de audio\r\n  const updateAudioSegment = (id: Id, patch: Partial<AudioSegment>) => {\r\n    setAudioSegments(prev =>\r\n      prev.map(s => s.id === id ? { ...s, ...patch } : s)\r\n    );\r\n  };\r\n\r\n  const deleteAudioSegment = (id: Id) => {\r\n    setAudioSegments(prev => prev.filter(s => s.id !== id));\r\n    if (selectedAudioSegmentId === id) setSelectedAudioSegmentId(null);\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", height: \"100vh\", fontFamily: \"system-ui, sans-serif\" }}>\r\n      {/* Sidebar izquierda: assets */}\r\n      <aside style={{ width: \"260px\", borderRight: \"1px solid #ddd\", padding: \"12px\", boxSizing: \"border-box\" }}>\r\n        <h2 style={{ fontSize: \"1.1rem\", marginBottom: \"8px\" }}>Assets</h2>\r\n\r\n        <div style={{ marginBottom: \"16px\" }}>\r\n          <h3 style={{ fontSize: \"0.95rem\" }}>Vídeos</h3>\r\n          <input type=\"file\" accept=\"video/*\" multiple onChange={handleVideoUpload} />\r\n          <ul style={{ listStyle: \"none\", padding: 0, marginTop: \"8px\", maxHeight: \"150px\", overflowY: \"auto\" }}>\r\n            {videoAssets.map(asset => (\r\n              <li key={asset.id} style={{ marginBottom: \"6px\" }}>\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", gap: \"4px\" }}>\r\n                  <span style={{ fontSize: \"0.85rem\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>\r\n                    {asset.name}\r\n                  </span>\r\n                  <button\r\n                    style={{ fontSize: \"0.75rem\" }}\r\n                    onClick={() => addVideoToTimeline(asset)}\r\n                  >\r\n                    + Timeline\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Video oculto solo para capturar duration */}\r\n                {!asset.duration && (\r\n                  <video\r\n                    src={asset.url}\r\n                    style={{ display: \"none\" }}\r\n                    onLoadedMetadata={(e) =>\r\n                      handleVideoLoadedMetadata(asset.id, e.currentTarget.duration)\r\n                    }\r\n                  />\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n\r\n        <div>\r\n          <h3 style={{ fontSize: \"0.95rem\" }}>Audios</h3>\r\n          <input type=\"file\" accept=\"audio/*\" multiple onChange={handleAudioUpload} />\r\n          <ul style={{ listStyle: \"none\", padding: 0, marginTop: \"8px\", maxHeight: \"150px\", overflowY: \"auto\" }}>\r\n            {audioAssets.map(asset => (\r\n              <li key={asset.id} style={{ marginBottom: \"6px\" }}>\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", gap: \"4px\" }}>\r\n                  <span style={{ fontSize: \"0.85rem\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>\r\n                    {asset.name}\r\n                  </span>\r\n                  <button\r\n                    style={{ fontSize: \"0.75rem\" }}\r\n                    onClick={() => addAudioToTimeline(asset)}\r\n                  >\r\n                    + Timeline\r\n                  </button>\r\n                </div>\r\n\r\n                {!asset.duration && (\r\n                  <audio\r\n                    src={asset.url}\r\n                    style={{ display: \"none\" }}\r\n                    onLoadedMetadata={(e) =>\r\n                      handleAudioLoadedMetadata(asset.id, e.currentTarget.duration)\r\n                    }\r\n                  />\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Zona central: preview + timeline */}\r\n      <main style={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\r\n        {/* Barra superior / info */}\r\n        <header style={{ padding: \"10px 12px\", borderBottom: \"1px solid #ddd\", display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <div>\r\n            <strong>Proyecto sin nombre</strong>\r\n          </div>\r\n          <button disabled style={{ opacity: 0.6 }}>Exportar (mock)</button>\r\n        </header>\r\n\r\n        {/* Preview + controles */}\r\n        <section style={{ padding: \"12px\", display: \"flex\", gap: \"16px\", borderBottom: \"1px solid #eee\" }}>\r\n          <div style={{ flex: 2 }}>\r\n            <h3 style={{ fontSize: \"0.95rem\", marginBottom: \"8px\" }}>Preview</h3>\r\n            <div style={{ background: \"#000\", borderRadius: \"4px\", overflow: \"hidden\", maxWidth: \"100%\", height: \"320px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n              {selectedVideoAsset ? (\r\n                <video\r\n                  ref={videoRef}\r\n                  src={selectedVideoAsset.url}\r\n                  style={{ maxWidth: \"100%\", maxHeight: \"100%\" }}\r\n                  controls={false}\r\n                />\r\n              ) : (\r\n                <span style={{ color: \"#aaa\", fontSize: \"0.9rem\" }}>\r\n                  Selecciona un segmento de vídeo en la timeline\r\n                </span>\r\n              )}\r\n            </div>\r\n            <div style={{ marginTop: \"8px\", display: \"flex\", gap: \"8px\" }}>\r\n              <button\r\n                onClick={handleToggleTimelinePlay}\r\n                disabled={videoSegments.length === 0}\r\n              >\r\n                {isTimelinePlaying ? \"⏸ Pausar timeline\" : \"▶ Play timeline\"}\r\n              </button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n\r\n          {/* Preview de audio seleccionado */}\r\n          <div style={{ flex: 1 }}>\r\n            <h3 style={{ fontSize: \"0.95rem\", marginBottom: \"8px\" }}>Audio seleccionado</h3>\r\n            {selectedAudioAsset ? (\r\n              <div>\r\n                <p style={{ fontSize: \"0.85rem\" }}>{selectedAudioAsset.name}</p>\r\n                <audio\r\n                  ref={audioRef}\r\n                  src={selectedAudioAsset.url}\r\n                  controls\r\n                  style={{ width: \"100%\" }}\r\n                />\r\n              </div>\r\n            ) : (\r\n              <span style={{ color: \"#aaa\", fontSize: \"0.9rem\" }}>\r\n                Selecciona un segmento de audio en la timeline\r\n              </span>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        {/* Timeline */}\r\n        <section style={{ flex: 1, display: \"flex\", flexDirection: \"column\", padding: \"12px\", gap: \"8px\" }}>\r\n          <h3 style={{ fontSize: \"0.95rem\" }}>Timeline</h3>\r\n\r\n          {/* Pista de vídeo */}\r\n          <div style={{ marginBottom: \"12px\" }}>\r\n            <div style={{ fontSize: \"0.85rem\", marginBottom: \"4px\" }}>Vídeo</div>\r\n            <div style={{ border: \"1px solid #ccc\", borderRadius: \"4px\", padding: \"6px\", minHeight: \"60px\", display: \"flex\", gap: \"8px\", overflowX: \"auto\" }}>\r\n              {videoSegments.length === 0 && (\r\n                <span style={{ fontSize: \"0.8rem\", color: \"#888\" }}>\r\n                  Arrastra vídeos a la timeline utilizando el botón “+ Timeline”.\r\n                </span>\r\n              )}\r\n              {videoSegments.map((seg) => {\r\n                const asset = videoAssets.find(a => a.id === seg.assetId);\r\n                const isSelected = seg.id === selectedVideoSegmentId;\r\n                return (\r\n                  <div\r\n                    key={seg.id}\r\n                    onClick={() => setSelectedVideoSegmentId(seg.id)}\r\n                    style={{\r\n                      minWidth: \"160px\",\r\n                      padding: \"4px\",\r\n                      borderRadius: \"4px\",\r\n                      border: isSelected ? \"2px solid #2563eb\" : \"1px solid #ccc\",\r\n                      background: isSelected ? \"#eff6ff\" : \"#f9fafb\",\r\n                      cursor: \"pointer\",\r\n                      fontSize: \"0.8rem\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontWeight: 600, marginBottom: \"2px\" }}>\r\n                      {asset?.name ?? \"Video\"}\r\n                    </div>\r\n                    <div>start: {seg.start.toFixed(2)}s</div>\r\n                    <div>end: {seg.end.toFixed(2)}s</div>\r\n                    <button\r\n                      style={{ marginTop: \"4px\", fontSize: \"0.7rem\" }}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        deleteVideoSegment(seg.id);\r\n                      }}\r\n                    >\r\n                      Eliminar\r\n                    </button>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Controles del segmento de vídeo seleccionado */}\r\n            {selectedVideoSegment && (\r\n              <div style={{ marginTop: \"8px\", padding: \"8px\", borderRadius: \"4px\", border: \"1px solid #ddd\", fontSize: \"0.8rem\" }}>\r\n                <div style={{ marginBottom: \"4px\", fontWeight: 600 }}>Editar segmento de vídeo</div>\r\n                <div style={{ display: \"flex\", gap: \"8px\", alignItems: \"center\", marginBottom: \"4px\" }}>\r\n                  <label>\r\n                    start (s):{\" \"}\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.1\"\r\n                      value={selectedVideoSegment.start}\r\n                      onChange={(e) =>\r\n                        updateVideoSegment(selectedVideoSegment.id, { start: Number(e.target.value) || 0 })\r\n                      }\r\n                      style={{ width: \"80px\" }}\r\n                    />\r\n                  </label>\r\n                  <label>\r\n                    end (s):{\" \"}\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.1\"\r\n                      value={selectedVideoSegment.end}\r\n                      onChange={(e) =>\r\n                        updateVideoSegment(selectedVideoSegment.id, { end: Number(e.target.value) || 0 })\r\n                      }\r\n                      style={{ width: \"80px\" }}\r\n                    />\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Pista de audio */}\r\n          <div>\r\n            <div style={{ fontSize: \"0.85rem\", marginBottom: \"4px\" }}>Audio</div>\r\n            <div style={{ border: \"1px solid #ccc\", borderRadius: \"4px\", padding: \"6px\", minHeight: \"60px\", display: \"flex\", gap: \"8px\", overflowX: \"auto\" }}>\r\n              {audioSegments.length === 0 && (\r\n                <span style={{ fontSize: \"0.8rem\", color: \"#888\" }}>\r\n                  Añade audios a la timeline con el botón “+ Timeline”.\r\n                </span>\r\n              )}\r\n              {audioSegments.map((seg) => {\r\n                const asset = audioAssets.find(a => a.id === seg.assetId);\r\n                const isSelected = seg.id === selectedAudioSegmentId;\r\n                return (\r\n                  <div\r\n                    key={seg.id}\r\n                    onClick={() => setSelectedAudioSegmentId(seg.id)}\r\n                    style={{\r\n                      minWidth: \"160px\",\r\n                      padding: \"4px\",\r\n                      borderRadius: \"4px\",\r\n                      border: isSelected ? \"2px solid #16a34a\" : \"1px solid #ccc\",\r\n                      background: isSelected ? \"#ecfdf3\" : \"#f9fafb\",\r\n                      cursor: \"pointer\",\r\n                      fontSize: \"0.8rem\",\r\n                    }}\r\n                  >\r\n                    <div style={{ fontWeight: 600, marginBottom: \"2px\" }}>\r\n                      {asset?.name ?? \"Audio\"}\r\n                    </div>\r\n                    <div>start: {seg.start.toFixed(2)}s</div>\r\n                    <div>end: {seg.end.toFixed(2)}s</div>\r\n                    <button\r\n                      style={{ marginTop: \"4px\", fontSize: \"0.7rem\" }}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        deleteAudioSegment(seg.id);\r\n                      }}\r\n                    >\r\n                      Eliminar\r\n                    </button>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Controles del segmento de audio seleccionado */}\r\n            {selectedAudioSegment && (\r\n              <div style={{ marginTop: \"8px\", padding: \"8px\", borderRadius: \"4px\", border: \"1px solid #ddd\", fontSize: \"0.8rem\" }}>\r\n                <div style={{ marginBottom: \"4px\", fontWeight: 600 }}>Editar segmento de audio</div>\r\n                <div style={{ display: \"flex\", gap: \"8px\", alignItems: \"center\", marginBottom: \"4px\" }}>\r\n                  <label>\r\n                    start (s):{\" \"}\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.1\"\r\n                      value={selectedAudioSegment.start}\r\n                      onChange={(e) =>\r\n                        updateAudioSegment(selectedAudioSegment.id, { start: Number(e.target.value) || 0 })\r\n                      }\r\n                      style={{ width: \"80px\" }}\r\n                    />\r\n                  </label>\r\n                  <label>\r\n                    end (s):{\" \"}\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.1\"\r\n                      value={selectedAudioSegment.end}\r\n                      onChange={(e) =>\r\n                        updateAudioSegment(selectedAudioSegment.id, { end: Number(e.target.value) || 0 })\r\n                      }\r\n                      style={{ width: \"80px\" }}\r\n                    />\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}